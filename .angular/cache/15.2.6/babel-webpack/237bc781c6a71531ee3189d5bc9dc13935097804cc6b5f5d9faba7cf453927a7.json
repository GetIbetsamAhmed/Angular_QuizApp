{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { modalConfig } from 'src/app/interfaces/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-bootstrap/modal\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/services/admin.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../common/material-table/material-table.component\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = [\"deleteTemplate\"];\nconst _c1 = [\"updateTemplate\"];\nfunction SchoolsListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"app-material-table\", 9);\n    i0.ɵɵlistener(\"actionEvent\", function SchoolsListComponent_div_8_Template_app_material_table_actionEvent_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.actionEvents($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"inputData\", ctx_r0.data)(\"columns\", ctx_r0.columns);\n  }\n}\nfunction SchoolsListComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h4\", 11);\n    i0.ɵɵtext(2, \"School List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_9_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.modalRef.hide());\n    });\n    i0.ɵɵelementStart(4, \"span\", 13);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 14)(7, \"p\");\n    i0.ɵɵtext(8, \"Are you sure you want to delete?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_9_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.confirmEvent());\n    });\n    i0.ɵɵtext(10, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_9_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.modalRef.hide());\n    });\n    i0.ɵɵtext(12, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SchoolsListComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h4\", 11);\n    i0.ɵɵtext(2, \"School List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_11_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.modalRef.hide());\n    });\n    i0.ɵɵelementStart(4, \"span\", 13);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 14)(7, \"form\", 17)(8, \"div\", 18)(9, \"label\", 19);\n    i0.ɵɵtext(10, \"School Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 20)(12, \"br\");\n    i0.ɵɵelementStart(13, \"label\", 19);\n    i0.ɵɵtext(14, \"School Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_11_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.confirmEvent());\n    });\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function SchoolsListComponent_ng_template_11_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.modalRef.hide());\n    });\n    i0.ɵɵtext(19, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.editForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"placeholder\", ctx_r4.isAddModel ? \"Enter School name\" : \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"placeholder\", ctx_r4.isAddModel ? \"Enter School address\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.isAddModel ? \"Create\" : \"Update\");\n  }\n}\nconst HEADER_DATA = [{\n  name: 'Name',\n  key: 'name'\n}, {\n  name: 'Address',\n  key: 'address'\n}];\nexport class SchoolsListComponent {\n  constructor(modalService, toastr, adminService) {\n    this.modalService = modalService;\n    this.toastr = toastr;\n    this.adminService = adminService;\n    this.editForm = new FormGroup({\n      name: new FormControl(''),\n      address: new FormControl('')\n    });\n    this.columns = HEADER_DATA;\n    this.data = null;\n    this.isAddModel = true;\n  }\n  ngOnInit() {\n    this.getSchoolsList();\n  }\n  getSchoolsList() {\n    this.adminService.get('schools').subscribe({\n      next: response => {\n        this.data = response;\n      }\n    });\n  }\n  openFormModal() {\n    this.modalRef = this.modalService.show(this.updateTemplate, modalConfig);\n  }\n  actionEvents(event) {\n    this.actionEvent = event;\n    if (event.type === 'edit') {\n      this.openEditModel();\n    } else if (event.type === 'delete') {\n      this.openDeleteModel();\n    }\n  }\n  openDeleteModel() {\n    this.modalRef = this.modalService.show(this.deleteTemplate, modalConfig);\n  }\n  openEditModel() {\n    this.isAddModel = false;\n    this.editForm.get('name')?.setValue(this.actionEvent?.data?.name);\n    this.editForm.get('address')?.setValue(this.actionEvent?.data?.address);\n    this.modalRef = this.modalService.show(this.updateTemplate, modalConfig);\n  }\n  editSchoolList() {\n    let url = \"schools/\" + this.actionEvent.data.id;\n    this.adminService.put(url, this.editForm.value).subscribe(response => {\n      let index = this.data.findIndex(x => x.id === this.actionEvent.data.id);\n      this.data[index] = {\n        ...response\n      };\n      this.data = structuredClone(this.data);\n      if (response) {\n        this.toastr.success('success', 'Updated Successfully!');\n        this.modalRef.hide();\n      }\n    });\n  }\n  createSchoolList() {\n    this.adminService.post('schools', this.editForm.value).subscribe(response => {\n      if (response) {\n        this.data.push(response);\n        this.toastr.success('success', 'Added Successfully!');\n        this.data = structuredClone(this.data);\n        this.modalRef.hide();\n        this.editForm.reset();\n      }\n    });\n  }\n  deleteSchoolList() {\n    let url = `schools/${this.actionEvent.data.id}`;\n    this.adminService.delete(url).subscribe(response => {\n      this.data = this.data.filter(x => x.id !== this.actionEvent.data.id);\n      this.data = structuredClone(this.data);\n      if (response) {\n        this.toastr.success('success', 'Deleted Successfully!');\n        this.modalRef.hide();\n      }\n    });\n  }\n  confirmEvent() {\n    if (this.actionEvent === null || this.actionEvent === undefined) {\n      this.createSchoolList();\n    } else if (this.actionEvent && this.actionEvent.type === 'edit') {\n      this.editSchoolList();\n    } else if (this.actionEvent && this.actionEvent.type === 'delete') {\n      this.deleteSchoolList();\n    }\n  }\n  ngOnDestroy() {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    this.actionEvent = null;\n  }\n}\nSchoolsListComponent.ɵfac = function SchoolsListComponent_Factory(t) {\n  return new (t || SchoolsListComponent)(i0.ɵɵdirectiveInject(i1.BsModalService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AdminService));\n};\nSchoolsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SchoolsListComponent,\n  selectors: [[\"app-schools-list\"]],\n  viewQuery: function SchoolsListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteTemplate = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.updateTemplate = _t.first);\n    }\n  },\n  decls: 13,\n  vars: 1,\n  consts: [[1, \"row\", \"mb15\"], [1, \"col-xs-10\", \"col-10\", \"col-md-10\", \"form-group\"], [1, \"col-xs-2\", \"col-2\", \"col-md-2\", \"form-group\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#schoolsList\", 1, \"btn\", \"btn-1d\", \"float-end\", 3, \"click\"], [1, \"feather\", \"icon-plus\"], [\"class\", \"row\", 4, \"ngIf\"], [\"deleteTemplate\", \"\"], [\"updateTemplate\", \"\"], [1, \"row\"], [3, \"inputData\", \"columns\", \"actionEvent\"], [1, \"modal-header\"], [1, \"modal-title\", \"pull-left\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"visually-hidden\"], [1, \"modal-body\", \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"btn-1d\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [3, \"formGroup\"], [1, \"input-section\"], [\"for\", \"inputField\", 1, \"d-flex\"], [\"id\", \"inputField\", \"matInput\", \"\", \"formControlName\", \"name\", 1, \"form-control\", 3, \"placeholder\"], [\"id\", \"addressField\", \"matInput\", \"\", \"formControlName\", \"address\", 1, \"form-control\", 3, \"placeholder\"]],\n  template: function SchoolsListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\");\n      i0.ɵɵtext(3, \"Schools List\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function SchoolsListComponent_Template_button_click_5_listener() {\n        return ctx.openFormModal();\n      });\n      i0.ɵɵelement(6, \"i\", 4);\n      i0.ɵɵtext(7, \" Create\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(8, SchoolsListComponent_div_8_Template, 2, 2, \"div\", 5);\n      i0.ɵɵtemplate(9, SchoolsListComponent_ng_template_9_Template, 13, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(11, SchoolsListComponent_ng_template_11_Template, 20, 4, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.data);\n    }\n  },\n  dependencies: [i4.NgIf, i5.MaterialTableComponent, i6.MatInput, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.FormGroupDirective, i7.FormControlName],\n  styles: [\".input-section[_ngcontent-%COMP%]{\\n  margin: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRtaW4vc2Nob29scy1saXN0L3NjaG9vbHMtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtBQUNkIiwic291cmNlc0NvbnRlbnQiOlsiLmlucHV0LXNlY3Rpb257XG4gIG1hcmdpbjogMTBweDtcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","modalConfig","i0","HEADER_DATA","name","key","SchoolsListComponent","constructor","modalService","toastr","adminService","address","ngOnInit","getSchoolsList","get","subscribe","next","response","data","openFormModal","modalRef","show","updateTemplate","actionEvents","event","actionEvent","type","openEditModel","openDeleteModel","deleteTemplate","isAddModel","editForm","setValue","editSchoolList","url","id","put","value","index","findIndex","x","structuredClone","success","hide","createSchoolList","post","push","reset","deleteSchoolList","delete","filter","confirmEvent","undefined","ngOnDestroy","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/Applications/Angular/Upwork/Angular_QuizApp/src/app/admin/schools-list/schools-list.component.ts","/Applications/Angular/Upwork/Angular_QuizApp/src/app/admin/schools-list/schools-list.component.html"],"sourcesContent":["import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\nimport { ToastrService } from 'ngx-toastr';\nimport { ActionEvent } from 'src/app/interfaces/admin.interface';\nimport { modalConfig } from 'src/app/interfaces/common';\nimport { AdminService } from 'src/app/services/admin.service';\nimport { DialogService } from 'src/app/services/dialog.config.service';\n\nconst HEADER_DATA: any[] = [\n  {name:'Name', key:'name'},\n  {name:'Address', key:'address'}\n]\n\n@Component({\n  selector: 'app-schools-list',\n  templateUrl: './schools-list.component.html',\n  styleUrls: ['./schools-list.component.css']\n})\n\nexport class SchoolsListComponent implements OnInit{\n\n  editForm: FormGroup=new FormGroup({\n    name: new FormControl(''),\n    address: new FormControl('')\n  })\n  @ViewChild('deleteTemplate') deleteTemplate: TemplateRef<any>;\n  @ViewChild('updateTemplate') updateTemplate: TemplateRef<any>;\n  columns: any[] = HEADER_DATA;\n  actionEvent:ActionEvent;\n  data: any = null;\n  modalRef: BsModalRef;\n  isAddModel: boolean=true;\n\n  constructor(private modalService: BsModalService,private toastr: ToastrService, private adminService : AdminService){}\n  ngOnInit(){\n    this.getSchoolsList();\n  }\n  getSchoolsList(){\n    this.adminService.get('schools').subscribe({\n      next:(response)=>{\n        this.data = response;\n      }\n    })\n  }\n  openFormModal() {\n    this.modalRef = this.modalService.show(this.updateTemplate,modalConfig);\n  }\n\n  actionEvents(event:ActionEvent){\n    this.actionEvent=event;\n    if(event.type==='edit'){\n      this.openEditModel()\n    }\n    else if(event.type==='delete'){\n    this.openDeleteModel()\n    }\n  }\n\n  openDeleteModel(){\n    this.modalRef = this.modalService.show(this.deleteTemplate,modalConfig);\n  }\n\n  openEditModel(){\n    this.isAddModel=false\n    this.editForm.get('name')?.setValue(this.actionEvent?.data?.name);\n    this.editForm.get('address')?.setValue(this.actionEvent?.data?.address);\n\n    this.modalRef = this.modalService.show(this.updateTemplate,modalConfig);\n  }\n\n\n  editSchoolList(){\n    let url=\"schools/\"+this.actionEvent.data.id;\n    this.adminService.put(url,this.editForm.value).subscribe(response=>{\n      let index=this.data.findIndex((x:any)=>x.id===this.actionEvent.data.id);\n      this.data[index]={...response};\n      this.data=structuredClone(this.data)\n         if(response){\n           this.toastr.success('success', 'Updated Successfully!');\n           this.modalRef.hide();\n         }\n     });\n  }\n\n  createSchoolList(){\n       this.adminService.post('schools',this.editForm.value).subscribe(response=>{\n      if(response){\n        this.data.push(response);\n        this.toastr.success('success', 'Added Successfully!');\n        this.data=structuredClone(this.data);\n        this.modalRef.hide();\n        this.editForm.reset();\n    }\n    });\n  }\n  deleteSchoolList(){\n    let url=`schools/${this.actionEvent.data.id}`\n    this.adminService.delete(url).subscribe(response=>{\n      this.data=this.data.filter((x:any)=>x.id!==this.actionEvent.data.id);\n      this.data=structuredClone(this.data);\n      if (response) {\n        this.toastr.success('success', 'Deleted Successfully!');\n        this.modalRef.hide();\n      }\n    });\n  }\n\n\n\n  confirmEvent(){\n    if(this.actionEvent===null || this.actionEvent===undefined){\n      this.createSchoolList();\n    }\n    else if(this.actionEvent && this.actionEvent.type==='edit'){\n    this.editSchoolList();\n    }\n    else if(this.actionEvent && this.actionEvent.type==='delete'){\n      this.deleteSchoolList();\n    }\n  }\n\n  ngOnDestroy(): void {\n    //Called once, before the instance is destroyed.\n    //Add 'implements OnDestroy' to the class.\n    this.actionEvent=null as any;\n  }\n}\n","<div class=\"row mb15\">\n    <div class=\"col-xs-10 col-10 col-md-10 form-group\">\n        <h3>Schools List</h3>\n    </div>\n    <div class=\"col-xs-2 col-2 col-md-2 form-group\">\n        <button type=\"button\" class=\"btn btn-1d float-end\" (click)=\"openFormModal()\" data-bs-toggle=\"modal\" data-bs-target=\"#schoolsList\"><i class=\"feather icon-plus\"></i> Create</button>\n    </div>\n</div>\n<div class=\"row\" *ngIf=\"data\">\n    <app-material-table [inputData]=\"data\"  [columns]=\"columns\" (actionEvent)=\"actionEvents($event)\"></app-material-table>\n</div>\n\n\n<!-- Delete Modal -->\n<ng-template #deleteTemplate>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">School List </h4>\n    <button type=\"button\" class=\"btn-close close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n      <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body text-center\">\n    <p>Are you sure you want to delete?</p>\n    <button type=\"button\" class=\"btn btn-1d \" (click)=\"confirmEvent()\" >Delete</button>\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"this.modalRef.hide()\" >Cancel</button>\n  </div>\n</ng-template>\n\n<!-- ADD Modal -->\n\n<!-- Update Modal -->\n<ng-template #updateTemplate>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">School List</h4>\n    <button type=\"button\" class=\"btn-close close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n      <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body text-center\">\n    <form [formGroup]=\"editForm\">\n      <div  class=\"input-section\">\n      <label for=\"inputField\" class=\"d-flex\">School Name</label>\n      <input class=\"form-control\"  id=\"inputField\" [placeholder]=\"isAddModel?'Enter School name':''\"   matInput formControlName=\"name\"><br>\n      <label for=\"inputField\" class=\"d-flex\">School Address</label>\n      <input class=\"form-control\"  id=\"addressField\" [placeholder]=\"isAddModel?'Enter School address':''\"   matInput formControlName=\"address\">\n    </div>\n    </form>\n    <button type=\"button\" class=\"btn btn-1d\" (click)=\"confirmEvent()\" >{{isAddModel?'Create':'Update'}}</button>\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"this.modalRef.hide()\" >Cancel</button>\n  </div>\n</ng-template>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}